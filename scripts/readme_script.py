dataset = [['introduction', 'photographic', 'marker', 'early', 'screening', 'application', 'method', 'collection', 'safety', 'privacy', 'improving', 'quality', 'feature', 'extraction', 'unit', 'observation', 'statistical', 'framework', 'result', 'discussion'], ['abstract', 'introduction', 'contribution', 'finding', 'privacy', 'ethic', 'disclosure', 'background', 'prior', 'work', 'illness', 'suicide', 'suicide', 'study', 'social', 'medium', 'collection', 'mhs', 'sw', 'content', 'verification', 'constructing', 'class', 'method', 'linguistic', 'interpersonal', 'interaction', 'measure', 'prediction', 'framework', 'propensity', 'score', 'meaning', 'result', 'linguistic', 'interpersonal', 'interaction', 'difference', 'content', 'difference', 'propensity', 'score', 'analysis', 'qualitative', 'interpretation', 'spectral', 'clustering', 'treatment', 'token', 'extracting', 'theme', 'cluster', 'hopelessness', 'anxiety', 'impulsiveness', 'selfesteem', 'loneliness', 'severe', 'stigmatized', 'illness', 'classification', 'result', 'discussion', 'clinical', 'societal', 'relevance', 'implication', 'sci', 'research', 'design', 'moderation', 'effort', 'selfreflection', 'ethical', 'consideration', 'limitation', 'future', 'direction', 'conclusion'], ['abstract', 'introduction', 'related', 'work', 'selfdisclosure', 'collection', 'generating', 'ground', 'truth', 'selfdisclosure', 'selfdisclosure', 'inference', 'characterizing', 'discourse', 'via', 'selfdisclosure', 'design', 'implication', 'future', 'direction', 'conclusion'], ['abstract', 'introduction', 'related', 'work', 'methodology', 'gathering', 'feature', 'recognizing', 'result', 'comparison', 'feature', 'without', 'prediction', 'accuracy', 'effect', 'amount', 'prediction', 'accuracy', 'discussion', 'conclusion'], ['abstract', 'introduction', 'improvement', 'novel', 'contribution', 'comparison', 'trained', 'healthcare', 'professional', 'method', 'collection', 'inclusion', 'criterion', 'safety', 'privacy', 'improving', 'quality', 'summary', 'statistic', 'feature', 'extraction', 'unit', 'observation', 'statistical', 'framework', 'machine', 'learning', 'model', 'time', 'series', 'analysis', 'shift', 'graph', 'result', 'machine', 'learning', 'classifier', 'shift', 'graph', 'discussion'], ['abstract', 'introduction', 'background', 'related', 'work', 'predicting', 'degree', 'method', 'dataset', 'degree', 'regression', 'modeling', 'ngrams', 'topic', 'lexica', 'number', 'evaluation', 'result', 'differential', 'language', 'analysis', 'conclusion'], ['abstract', 'introduction', 'background', 'method', 'set', 'feature', 'extraction', 'classification', 'feature', 'extraction', 'blog', 'classification', 'community', 'classification', 'feature', 'selection', 'result', 'classification', 'community', 'classification', 'blog', 'classification', 'sentiment', 'analysis', 'analysis', 'topic', 'analysis', 'linguistic', 'style', 'conclusion'], ['introduction', 'background', 'previous', 'work', 'aim', 'study', 'method', 'collection', 'suicide', 'probability', 'anxiety', 'stress', 'weibo', 'suicide', 'communication', 'wsc', 'language', 'feature', 'analysis', 'simplified', 'chineselinguistic', 'inquiry', 'count', 'scliwc', 'category', 'marker', 'automatic', 'machine', 'classifier', 'marker', 'result', 'scliws', 'category', 'marker', 'automatic', 'machine', 'classifier', 'marker', 'discussion', 'principal', 'finding', 'scliwc', 'category', 'marker', 'automatic', 'machine', 'classifier', 'limitation', 'implication', 'future', 'research', 'conclusion'], ['abstract', 'introduction', 'related', 'work', 'college', 'campus', 'social', 'medium', 'general', 'population', 'college', 'student', 'macroscale', 'wellbeing', 'social', 'medium', 'university', 'social', 'medium', 'university', 'initial', 'acquisition', 'filling', 'gap', 'subreddit', 'correcting', 'underadoption', 'reddit', 'demographic', 'representativeness', 'method', 'automatic', 'identification', 'expression', 'wellbeing', 'index', 'university', 'mwi', 'result', 'aim', 'evaluating', 'expression', 'classifier', 'model', 'performance', 'examining', 'significant', 'predictive', 'feature', 'expert', 'evaluation', 'mh', 'expression', 'university', 'subreddits', 'aim', 'analyzing', 'mh', 'expression', 'university', 'aim', 'relating', 'mwi', 'university', 'attribute', 'discussion', 'theoretical', 'implication', 'finding', 'implication', 'design', 'technology', 'improving', 'counseling', 'effort', 'technology', 'assessing', 'campus', 'morale', 'limitation', 'future', 'work', 'diagnostic', 'claim', 'casualty', 'generalizability', 'prevalence', 'evaluation', 'alternative', 'source', 'conclusion'], ['abstract', 'introduction', 'midas', 'system', 'architecture', 'collection', 'preprocessing', 'feature', 'extraction', 'tfidf', 'feature', 'pattern', 'life', 'feature', 'plf', 'age', 'gender', 'polarity', 'feature', 'social', 'feature', 'prediction', 'model', 'midas', 'interface', 'demonstration', 'profile', 'disorder', 'dimension', 'conclusion'], ['abstract', 'introduction', 'study', 'method', 'collection', 'preprocessing', 'procedure', 'classification', 'model', 'ethic', 'declaration', 'result', 'discussion', 'availability'], ['abstract', 'introduction', 'methodology', 'building', 'digital', 'cohort', 'age', 'gender', 'raceethnicity', 'location', 'classifier', 'analysis', 'discussion', 'conclusion', 'privacy', 'ethical', 'consideration'], ['abstract', 'introduction', 'context', 'related', 'work', 'methodology', 'topic', 'modeling', 'validation', 'result', 'frequent', 'topic', 'across', 'reddit', 'public', 'journalling', 'private', 'journalling', 'analysis', 'journal', 'mood', 'visibility', 'conclusion'], ['abstract', 'introduction', 'related', 'work', 'method', 'condition', 'condition', 'severity', 'type', 'symptom', 'benign', 'explanation', 'serious', 'illness', 'disability', 'stigma', 'condition', 'log', 'collection', 'search', 'engine', 'information', 'seeking', 'sharing', 'survey', 'result', 'prevalence', 'intent', 'motivation', 'prevalence', 'intent', 'activity', 'intent', 'search', 'engine', 'use', 'intent', 'use', 'information', 'seeking', 'intent', 'sharing', 'information', 'motivation', 'activity', 'motivation', 'use', 'seeking', 'information', 'motivation', 'use', 'sharing', 'information', 'summary', 'result', 'comparing', 'information', 'definition', 'comparison', 'severity', 'type', 'condition', 'comparison', 'social', 'stigma', 'condition', 'comparison', 'context', 'use', 'across', 'condition', 'severity', 'summary', 'result', 'privacy', 'quality', 'social', 'support', 'discussion', 'design', 'implication', 'future', 'direction', 'conclusion'], ['abstract', 'introduction', 'related', 'work', 'method', 'rq', 'result', 'selfdisclosure', 'general', 'linguistic', 'attribute', 'information', 'sharing', 'rq', 'result', 'social', 'support', 'factor', 'driving', 'social', 'support', 'predictive', 'variable', 'statistical', 'technique', 'prediction', 'result', 'characterizing', 'social', 'support', 'rq', 'result', 'anonymity', 'disinhibition', 'difference', 'language', 'use', 'difference', 'social', 'support', 'discussion', 'theoretical', 'implication', 'selfdisclosure', 'social', 'support', 'anonymity', 'limitation', 'conclusion'], ['abstract', 'introduction', 'background', 'related', 'work', 'selfdisclosure', 'visual', 'method', 'visual', 'sociology', 'social', 'medium', 'imagery', 'analysis', 'social', 'medium', 'wellbeing', 'collection', 'reliability', 'method', 'visual', 'feature', 'visual', 'theme', 'linguistic', 'emotion', 'visual', 'theme', 'linguistic', 'theme', 'result', 'rq', 'visual', 'feature', 'rq', 'visual', 'theme', 'captioned', 'image', 'self', 'image', 'social', 'image', 'food', 'graphic', 'image', 'rq', 'b', 'emotion', 'manifested', 'visual', 'theme', 'rq', 'linguistic', 'theme', 'discussion', 'relationship', 'finding', 'visual', 'sociology', 'implication', 'hci', 'design', 'semiautomated', 'intervention', 'tool', 'technology', 'selfreflection', 'capability', 'avail', 'social', 'emotional', 'support', 'ethical', 'consideration', 'limitation', 'future', 'work', 'conclusion'], ['abstract', 'introduction', 'method', 'related', 'theme', 'presence', 'symptom', 'demographic', 'characteristic', 'result', 'theme', 'source', 'symptom', 'conveyed', 'demographic', 'discussion'], ['abstract', 'introduction', 'background', 'motivation', 'age', 'gendermatched', 'drawback', 'balanced', 'dataset', 'concomitance', 'method', 'lexiconbased', 'approach', 'openvocabulary', 'approach', 'latent', 'dirichlet', 'allocation', 'brown', 'clustering', 'character', 'ngrams', 'perplexity', 'result', 'isolated', 'feature', 'liwc', 'vector', 'latent', 'dirichlet', 'allocation', 'brown', 'clustering', 'perplexity', 'machine', 'learning', 'analysis', 'languagebased', 'signal', 'lad', 'brown', 'clustering', 'conclusion'], ['abstract', 'introduction', 'background', 'werther', 'effect', 'copycat', 'suicide', 'psychology', 'suicide', 'wellbeing', 'social', 'medium', 'social', 'medium', 'wikipedia', 'method', 'measuring', 'volume', 'developing', 'baseline', 'developing', 'content', 'analysis', 'linguistic', 'measure', 'ngram', 'analysis', 'topic', 'model', 'analysis', 'result', 'measuring', 'volume', 'content', 'analysis', 'linguistic', 'measure', 'ngram', 'comparison', 'topic', 'model', 'analysis', 'discussion', 'implication', 'finding', 'ethic', 'conclusion'], ['abstract', 'introduction', 'social', 'medium', 'social', 'medium', 'micropattern', 'analysis', 'symptom', 'dynamic', 'caveat', 'method', 'result', 'micro', 'pattern', 'randomly', 'distributed', 'difference', 'micropatterns', 'separating', 'discussion', 'ethic', 'privacy', 'conclusion'], ['abstract', 'introduction', 'privacy', 'ethic', 'related', 'work', 'gap', 'gender', 'cultural', 'dimension', 'gender', 'culture', 'social', 'medium', 'gender', 'country', 'inference', 'gender', 'inference', 'country', 'name', 'inference', 'validation', 'handling', 'population', 'internet', 'penetration', 'bias', 'method', 'obtaining', 'genuine', 'disclosure', 'expert', 'verification', 'disclosure', 'developing', 'accurate', 'dataset', 'quantifying', 'difference', 'disclosure', 'linguistic', 'measure', 'topic', 'modeling', 'result', 'gender', 'difference', 'linguistic', 'difference', 'affective', 'attribute', 'gender', 'cognitive', 'attribute', 'gender', 'lexical', 'density', 'awareness', 'gender', 'temporal', 'reference', 'gender', 'socialpersonal', 'concern', 'gender', 'interpersonal', 'focus', 'gender', 'topical', 'difference', 'crosscultural', 'difference', 'linguistic', 'difference', 'affective', 'attribute', 'culture', 'cognitive', 'attribute', 'culture', 'lexical', 'density', 'awareness', 'culture', 'temporal', 'reference', 'culture', 'socialpersonal', 'concern', 'culture', 'interpersonal', 'focus', 'culture', 'topical', 'difference', 'interaction', 'gender', 'culture', 'discussion', 'theoretical', 'practical', 'implication', 'reflecting', 'gender', 'difference', 'reflecting', 'cultural', 'difference', 'gender', 'culture', 'design', 'implication', 'ethic', 'making', 'intervention', 'cultureaware', 'making', 'intervention', 'genderaware', 'limitation', 'conclusion'], ['abstract', 'introduction', 'background', 'objective', 'method', 'study', 'step', 'collection', 'selection', 'analysis', 'ethical', 'approval', 'result', 'distribution', 'time', 'partofspeech', 'emotion', 'analysis', 'negation', 'polarity', 'analysis', 'discussion', 'principal', 'finding', 'different', 'distribution', 'time', 'different', 'style', 'writing', 'predominant', 'emotion', 'negative', 'focused', 'emotion', 'language', 'negative', 'polarity', 'limitation', 'future', 'direction', 'conclusion'], ['abstract', 'introduction', 'crosscultural', 'difference', 'experience', 'expression', 'expression', 'belief', 'illness', 'language', 'marker', 'online', 'cultural', 'difference', 'online', 'language', 'marker', 'present', 'study', 'method', 'collection', 'measure', 'result', 'descriptive', 'statistic', 'liic', 'analysis', 'topic', 'modeling', 'discussion', 'conclusion'], ['introduction', 'background', 'related', 'work', 'past', 'work', 'hci', 'crosscultural', 'difference', 'expression', 'expression', 'general', 'online', 'community', 'cultural', 'difference', 'online', 'community', 'method', 'analysis', 'method', 'analysis', 'selection', 'criterion', 'scope', 'defining', 'cultural', 'identity', 'use', 'clinical', 'language', 'constraint', 'limitation', 'tradeoff', 'platform', 'context', 'talklife', 'defining', 'reply', 'cup', 'privacy', 'ethic', 'disclosure', 'cross', 'sectional', 'analysis', 'identitybased', 'expression', 'linguistic', 'difference', 'expression', 'support', 'difference', 'clinical', 'language', 'use', 'general', 'linguistic', 'difference', 'support', 'behavior', 'cultural', 'homophily', 'longitudinal', 'analysis', 'identitybased', 'expression', 'linguistic', 'difference', 'expression', 'support', 'support', 'behavior', 'cultural', 'homophily', 'crossplatform', 'validation', 'identitybased', 'expression', 'linguistic', 'difference', 'expression', 'general', 'linguistic', 'difference', 'difference', 'clinical', 'language', 'support', 'practice', 'cultural', 'homophily', 'impact', 'forum', 'success', 'characterizing', 'success', 'moment', 'change', 'impact', 'cultural', 'difference', 'forum', 'success', 'identity', 'language', 'homophily', 'discussion', 'implication', 'cultural', 'difference', 'importance', 'cultural', 'difference', 'online', 'potential', 'reason', 'cultural', 'difference', 'design', 'recommendation', 'peer', 'matching', 'community', 'building', 'building', 'predictive', 'model', 'limitation', 'future', 'work', 'conclusion'], ['abstract', 'background', 'related', 'work', 'method', 'embeddings', 'wordvec', 'clustering', 'suicidewatch', 'result', 'experimental', 'parameter', 'analysis', 'representation', 'analysis', 'informal', 'topic', 'comparison', 'risk', 'factor', 'discussion', 'conclusion'], ['abstract', 'introduction', 'related', 'work', 'methodology', 'dataset', 'interaction', 'model', 'discussion', 'tree', 'relationship', 'modeling', 'network', 'rmn', 'activity', 'interaction', 'discussion', 'pattern', 'discussion', 'tree', 'descriptor', 'analysis', 'conclusion']]

from gensim import corpora
from settings.common import load_flat_dataset
import shutil

#dataset = load_flat_dataset('data/sample_tweets.csv', delimiter=' ')
dictionary = corpora.Dictionary(dataset)
# maybe take out filter extremes?
#dictionary.filter_extremes()
corpus = [dictionary.doc2bow(doc) for doc in dataset]

from gensim.models import FastText
from gensim.models.fasttext import save_facebook_model
from settings.common import load_flat_dataset

#dataset_name = 'sample_tweets'
#dataset = load_flat_dataset('data/{}.csv'.format(dataset_name))
#ft = FastText(sentences=dataset, vector_size=100, min_count=50)
#save_facebook_model(ft, 'local_{}_ft.bin'.format(dataset_name))

from tm_pipeline.gtmmallet import GTMMallet

gtm_path = 'mallet-gtm/bin/mallet'
tnd_path = 'mallet-gtm/bin/mallet'

model1 = GTMMallet(tnd_path, corpus, num_topics=2, id2word=dictionary, workers=1,
                   alpha=50, beta=0.01, skew=25, noise_words_max=50, iterations=100, seed_topics_file='data/seed_topics.csv', over_sampling_factor=1)

topics = model1.show_topics(num_topics=2, num_words=2, formatted=False)

vector = model1[corpus[0]]
print("\n\n\n\n" + str(vector))

shutil.copyfile(model1.fdoctopics(), 'data/doc_topics.txt')

from tm_pipeline.gtm import GTM

#print("\n\n\n running second \n\n\n")

# don't really need this
#model = GTM(dataset=dataset, tnd_k=2, tnd_alpha=50, tnd_beta0=0.01, tnd_beta1=25, tnd_noise_words_max=50,
                 #tnd_iterations=100, gtm_iterations=100, gtm_k=20, phi=10, topic_depth=100, top_words=20,
                 #save_path='results/', mallet_tnd_path=tnd_path, mallet_gtm_path=gtm_path, random_seed=1824, run=True,
                 #seed_topics_file='data/seed_topics.csv', over_sampling_factor=1)